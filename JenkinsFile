pipeline {

  agent any
   
stages {
  stage('Build') {
      steps {
        bat 'mvn package'
      }
    }
       stage('Junit Test Case') {
      steps {
        bat 'mvn test'
      }
    }
    
       node {
     stage('SCM') 
      {
        git 'https://github.com/KalyaniChougule/DemoSonar.git'
           }
         stage('SonarQube analysis') {
        withSonarQubeEnv('My SonarQube Server') {
            bat 'mvn clean package sonar:sonar'
    } // SonarQube taskId is automatically attached to the pipeline context
  }
}


     /*  stage('SonarQube analysis') {
            agent{
            		label 'master'
            	}
            
            steps {
       			script{
       					scannerHome=tool'sonarqube scanner 3.3.0'
       				}
       				withSonarQubeEnv('sonarqube')
       				{
       					sh "${scannerHome}/bin/sonar-scanner"
       				}	                     
       			}
       			}*/
       			
      
       
        
    
